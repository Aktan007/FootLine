{% extends 'shop/base.html' %}
{% block title %}{% if is_edit %}Редактировать{% else %}Добавить{% endif %} товар - FootLine{% endblock %}
{% block content %}
<h1 class="fw-bold mb-4">
    <i class="bi bi-box-seam me-2"></i>
    {% if is_edit %}Редактировать товар{% else %}Добавить новый товар{% endif %}
</h1>
<div class="row"><div class="col-lg-7">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="mb-3">
            <label class="form-label fw-semibold">Артикул</label>
            {% if is_edit %}
                <input type="text" class="form-control" value="{{ form.article.value }}" disabled>
                <input type="hidden" name="article" value="{{ form.article.value }}">
            {% else %}
                {{ form.article }}
            {% endif %}
            {% if form.article.errors %}<div class="text-danger small">{{ form.article.errors.0 }}</div>{% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold">Наименование</label>
            {{ form.name }}
            {% if form.name.errors %}<div class="text-danger small">{{ form.name.errors.0 }}</div>{% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold">Категория</label>
            {{ form.category }}
            {% if form.category.errors %}<div class="text-danger small">{{ form.category.errors.0 }}</div>{% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold">Производитель</label>
            {{ form.manufacturer }}
            {% if form.manufacturer.errors %}<div class="text-danger small">{{ form.manufacturer.errors.0 }}</div>{% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold">Поставщик</label>
            {{ form.supplier }}
            {% if form.supplier.errors %}<div class="text-danger small">{{ form.supplier.errors.0 }}</div>{% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold">Цена</label>
            {{ form.price }}
            {% if form.price.errors %}<div class="text-danger small">{{ form.price.errors.0 }}</div>{% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold">Единица измерения</label>
            {{ form.unit }}
            {% if form.unit.errors %}<div class="text-danger small">{{ form.unit.errors.0 }}</div>{% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold">Количество на складе</label>
            {{ form.quantity }}
            {% if form.quantity.errors %}<div class="text-danger small">{{ form.quantity.errors.0 }}</div>{% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold">Скидка (%)</label>
            {{ form.discount }}
            {% if form.discount.errors %}<div class="text-danger small">{{ form.discount.errors.0 }}</div>{% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold">Описание</label>
            {{ form.description }}
            {% if form.description.errors %}<div class="text-danger small">{{ form.description.errors.0 }}</div>{% endif %}
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold">Фото товара</label>
            {{ form.photo }}
            {% if product.photo %}
            <div class="mt-2">
                <small class="text-muted">Текущее фото:</small><br>
                <img src="{{ product.photo.url }}" style="max-width:200px;border-radius:4px;" class="mt-1">
            </div>
            {% endif %}
            {% if form.photo.errors %}<div class="text-danger small">{{ form.photo.errors.0 }}</div>{% endif %}
        </div>
        <div class="d-flex gap-2 mt-4">
            <button type="submit" class="btn btn-primary flex-fill">
                <i class="bi bi-check-lg me-1"></i>
                {% if is_edit %}Сохранить изменения{% else %}Добавить товар{% endif %}
            </button>
            <a href="{% url 'shop:products_list' %}" class="btn btn-secondary flex-fill text-center">
                <i class="bi bi-x-lg me-1"></i>Отмена
            </a>
        </div>
    </form>
</div></div>
{% endblock %}
